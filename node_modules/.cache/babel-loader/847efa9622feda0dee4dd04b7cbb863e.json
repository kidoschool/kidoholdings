{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar globalId = 0;\n\nvar HubspotForm = function (_React$Component) {\n  _inherits(HubspotForm, _React$Component);\n\n  function HubspotForm(props) {\n    _classCallCheck(this, HubspotForm);\n\n    var _this = _possibleConstructorReturn(this, (HubspotForm.__proto__ || Object.getPrototypeOf(HubspotForm)).call(this, props));\n\n    _this.state = {\n      loaded: false\n    };\n    _this.id = globalId++;\n    _this.createForm = _this.createForm.bind(_this);\n    _this.findFormElement = _this.findFormElement.bind(_this);\n    return _this;\n  }\n\n  _createClass(HubspotForm, [{\n    key: 'createForm',\n    value: function createForm() {\n      var _this2 = this;\n\n      if (window.hbspt) {\n        // protect against component unmounting before window.hbspt is available\n        if (this.el === null) {\n          return;\n        }\n\n        var props = _extends({}, this.props);\n\n        delete props.loading;\n        delete props.onSubmit;\n        delete props.onReady;\n\n        var options = _extends({}, props, {\n          target: '#' + this.el.getAttribute('id'),\n          onFormSubmit: function onFormSubmit($form) {\n            // ref: https://developers.hubspot.com/docs/methods/forms/advanced_form_options\n            var formData = $form.serializeArray();\n\n            _this2.props.onSubmit(formData);\n          }\n        });\n\n        window.hbspt.forms.create(options);\n        return true;\n      } else {\n        setTimeout(this.createForm, 1);\n      }\n    }\n  }, {\n    key: 'loadScript',\n    value: function loadScript() {\n      var _this3 = this;\n\n      var script = document.createElement('script');\n      script.defer = true;\n\n      script.onload = function () {\n        _this3.createForm();\n\n        _this3.findFormElement();\n      };\n\n      script.src = '//js.hsforms.net/forms/v2.js';\n      document.head.appendChild(script);\n    }\n  }, {\n    key: 'findFormElement',\n    value: function findFormElement() {\n      // protect against component unmounting before form is added\n      if (this.el === null) {\n        return;\n      }\n\n      var form = this.el.querySelector('iframe');\n\n      if (form) {\n        this.setState({\n          loaded: true\n        });\n\n        if (this.props.onReady) {\n          this.props.onReady(form);\n        }\n      } else {\n        setTimeout(this.findFormElement, 1);\n      }\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      if (!window.hbspt && !this.props.noScript) {\n        this.loadScript();\n      } else {\n        this.createForm();\n        this.findFormElement();\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {}\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this4 = this;\n\n      return _react2.default.createElement('div', null, _react2.default.createElement('div', {\n        ref: function ref(el) {\n          return _this4.el = el;\n        },\n        id: 'reactHubspotForm' + this.id,\n        style: {\n          display: this.state.loaded ? 'block' : 'none'\n        }\n      }), !this.state.loaded && this.props.loading);\n    }\n  }]);\n\n  return HubspotForm;\n}(_react2.default.Component);\n\nexports.default = HubspotForm;\nmodule.exports = exports['default'];","map":{"version":3,"sources":["../src/index.js"],"names":[],"mappings":"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","sourcesContent":["import React from 'react'\nimport ReactDOM from 'react-dom'\n\nlet globalId = 0\n\nclass HubspotForm extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tloaded: false\n\t\t}\n\t\tthis.id = globalId++\n\t\tthis.createForm = this.createForm.bind(this)\n\t\tthis.findFormElement = this.findFormElement.bind(this)\n\t}\n\tcreateForm() {\n\t\tif (window.hbspt) {\n\t\t\t// protect against component unmounting before window.hbspt is available\n\t\t\tif (this.el === null) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tlet props = {\n\t\t\t\t...this.props\n\t\t\t}\n\t\t\tdelete props.loading\n\t\t\tdelete props.onSubmit\n\t\t\tdelete props.onReady\n\t\t\tlet options = {\n\t\t\t\t...props,\n\t\t\t\ttarget: `#${this.el.getAttribute(`id`)}`,\n\t\t\t\tonFormSubmit : ($form) => {\n\t\t\t\t\t// ref: https://developers.hubspot.com/docs/methods/forms/advanced_form_options\n\t\t\t\t\tvar formData = $form.serializeArray();\n\t\t\t\t\tthis.props.onSubmit(formData);\t\n\t\t\t\t}\n\t\t\t}\n\t\t\twindow.hbspt.forms.create(options)\n\t\t\treturn true\n\t\t}\n\t\telse{\n\t\t\tsetTimeout(this.createForm, 1)\n\t\t}\n\t}\n\tloadScript() {\n\t\tlet script = document.createElement(`script`)\n\t\tscript.defer = true\n\t\tscript.onload = () => {\n\t\t\tthis.createForm()\n\t\t\tthis.findFormElement()\n\t\t}\n\t\tscript.src = `//js.hsforms.net/forms/v2.js`\n\t\tdocument.head.appendChild(script)\n\t}\n\tfindFormElement(){\n\t\t// protect against component unmounting before form is added\n\t\tif (this.el === null) {\n\t\t\treturn\n\t\t}\n\t\tlet form = this.el.querySelector(`iframe`)\n\t\tif(form){\n\t\t\tthis.setState({ loaded: true })\n\t\t\tif (this.props.onReady) {\n\t\t\t\tthis.props.onReady(form);\n\t\t\t}\n\t\t}\n\t\telse{\n\t\t\tsetTimeout(this.findFormElement, 1)\n\t\t}\n\t}\n\tcomponentDidMount() {\n\t\tif (!window.hbspt && !this.props.noScript) {\n\t\t\tthis.loadScript()\n\t\t} else {\n\t\t\tthis.createForm()\n\t\t\tthis.findFormElement()\n\t\t}\n\t}\n\tcomponentWillUnmount() {\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div\n\t\t\t\t\tref={el => this.el = el}\n\t\t\t\t\tid={`reactHubspotForm${this.id}`}\n\t\t\t\t\tstyle={{ display: this.state.loaded ? 'block' : 'none'}}\n\t\t\t\t\t/>\n\t\t\t\t{!this.state.loaded && this.props.loading}\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default HubspotForm\n"]},"metadata":{},"sourceType":"script"}